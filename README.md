# graspy - AI Tutor for Out-of-School Children

## Project Overview

**Mission:** Provide personalized, culturally-aware education to 244 million out-of-school children in crisis zones, IDP camps, and underserved communities worldwide.

**Hackathon:** FutureStack GenAI Hackathon 2025  
**Team:** graspy
---

## Core Requirements

### 1. Primary User Stories

**As a displaced child in an IDP camp, I want to:**
- Learn in my native language (Hausa, Arabic, Pashto, etc.)
- Study at my actual cognitive level (not just my age)
- Access education even when internet is unavailable
- See examples that relate to my world (local currency, food, contexts)
- Ask questions without feeling judged
- Track my progress and feel accomplished

**As a parent/guardian, I want to:**
- See what my child is learning
- Know they're getting quality education despite displacement
- Not worry about expensive tutors or schools
- Have confidence the content is appropriate for their level

---

### 2. MVP Feature Set (Hackathon Scope)

#### âœ… MUST HAVE (Core MVP)
1. **Onboarding Flow** âœ… IMPLEMENTED
   - **Auto-detection** using browser `Intl` API and `navigator` for country/language
   - **All countries** supported via Intl.DisplayNames (200+ countries)
   - **Crisis zones prioritized** (Palestine, Nigeria, Afghanistan, Syria, etc.)
   - Language selection with native script display (Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©, YorÃ¹bÃ¡, etc.)
   - Grade level selection (Beginner, Elementary, Middle, High)
   - **localStorage persistence** for user profile
   - Redirect to dashboard if already onboarded

2. **Curriculum Generation (Llama-powered)**
   - Input: Country, grade level, language, cognitive assessment results
   - Output: Personalized learning path with:
     - 4 subjects: Math, Science, Language Arts, Social Studies
     - 8-12 topics per subject, sequenced by prerequisite logic
     - Culturally relevant topic framing
   - Cache in localStorage for offline access

3. **Learning Interface**
   - Display curriculum as interactive topic cards
   - Show mastery percentage per topic
   - Indicate locked/unlocked topics (prerequisite-based)
   - Current topic highlighted
   - Progress indicators (completed, in-progress, locked)

4. **Lesson Viewer**
   - Click topic â†’ Load lesson content
   - Lesson structure:
     - Concept explanation (in student's language)
     - 2-3 worked examples (culturally relevant)
     - 5 practice problems with hints
   - All content generated by Llama, cached locally

5. **Quiz System**
   - Each topic has 5-7 quiz questions
   - Multiple choice + short answer support
   - Llama grades responses and provides feedback
   - Incorrect answers â†’ Personalized explanation (not just "wrong")
   - Mastery calculation: (correct/total) Ã— 100

6. **AI Chat Tutor**
   - Real-time Q&A in student's native language
   - Context-aware (knows current topic, past struggles)
   - Socratic method (guides, doesn't spoon-feed)
   - Maintains last 10 message history for coherence
   - Encouraging, patient, non-judgmental tone

7. **Progress Dashboard**
   - Visual mastery chart per subject
   - Completed topics count
   - Quiz scores timeline
   - Weak areas identified (topics < 60% mastery)
   - Recommended next steps

8. **Offline Mode**
   - After initial curriculum generation, cache:
     - 5 lessons per topic
     - All quiz questions
     - User profile and progress
   - Display offline indicator when no connection
   - Chat requires connection (graceful error message)

#### ðŸŸ¡ NICE TO HAVE (If Time Permits)
- Voice input for chat (Web Speech API)
- Adaptive curriculum (Llama recommends remedial topics based on quiz performance)
- Study streak tracker (days in a row)
- Topic bookmarking
- Export progress as PDF

#### âŒ OUT OF SCOPE (Post-Hackathon)
- User authentication/accounts
- Backend database
- Parent separate login
- Mobile native apps
- Peer-to-peer features
- Video content
- Teacher dashboard

---

## Technical Stack

### Frontend
- **Framework:** NextJs, React 19+ with TypeScript
- **Styling:** Tailwind CSS (mobile-first, accessible)
- **Icons:** Lucide React
- **Forms:** React Hook Form + Zod validation
- **Storage:** localStorage API (offline-first)

### Backend/API Layer
- **Runtime:** Vercel Serverless Functions (Node.js)
- **API Routes:**
  - `/api/curriculum` - Generate full curriculum
  - `/api/lesson` - Generate lesson content for a topic
  - `/api/chat` - Chat tutor interactions
  - `/api/quiz-feedback` - Grade and explain quiz answers



### Development Tools
- **Version Control:** Git + GitHub
- **Package Manager:** npm (fast, efficient)
- **Linting:** ESLint
- **Type Checking:** TypeScript strict mode

---

## File Structure

```
graspy/
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ favicon.ico
â”‚   â”œâ”€â”€ manifest.json (for PWA future)
â”‚   â””â”€â”€ assets/
â”‚       â”œâ”€â”€ images/
â”‚       â””â”€â”€ icons/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ onboarding/
â”‚   â”‚   â”‚   â”œâ”€â”€ CountrySelector.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ GradeLevelMapper.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ LanguageSelector.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ CognitiveAssessment.tsx
â”‚   â”‚   â”‚   â””â”€â”€ OnboardingFlow.tsx
â”‚   â”‚   â”œâ”€â”€ learning/
â”‚   â”‚   â”‚   â”œâ”€â”€ CurriculumGrid.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ TopicCard.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ LessonViewer.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ QuizInterface.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ProgressBar.tsx
â”‚   â”‚   â”œâ”€â”€ chat/
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatInterface.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ MessageBubble.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ChatInput.tsx
â”‚   â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”‚   â”œâ”€â”€ ProgressDashboard.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ MasteryChart.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ WeakAreasCard.tsx
â”‚   â”‚   â”‚   â””â”€â”€ StreakTracker.tsx
â”‚   â”‚   â””â”€â”€ shared/
â”‚   â”‚       â”œâ”€â”€ LoadingSpinner.tsx
â”‚   â”‚       â”œâ”€â”€ ErrorBoundary.tsx
â”‚   â”‚       â”œâ”€â”€ OfflineIndicator.tsx
â”‚   â”‚       â””â”€â”€ Layout.tsx
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ llama/
â”‚   â”‚   â”‚   â”œâ”€â”€ prompts.ts (all Llama prompt templates)
â”‚   â”‚   â”‚   â”œâ”€â”€ curriculum-generator.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ lesson-generator.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ chat-tutor.ts
â”‚   â”‚   â”‚   â””â”€â”€ quiz-grader.ts
â”‚   â”‚   â”œâ”€â”€ storage/
â”‚   â”‚   â”‚   â”œâ”€â”€ localStorage.ts (utility functions)
â”‚   â”‚   â”‚   â”œâ”€â”€ user-profile.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ curriculum-cache.ts
â”‚   â”‚   â”‚   â””â”€â”€ progress-tracker.ts
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â””â”€â”€ client.ts (fetch wrappers)
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”‚   â”œâ”€â”€ education-systems.ts (countryâ†’grade mapping)
â”‚   â”‚   â”‚   â”œâ”€â”€ language-codes.ts
â”‚   â”‚   â”‚   â””â”€â”€ mastery-calculator.ts
â”‚   â”‚   â””â”€â”€ constants/
â”‚   â”‚       â”œâ”€â”€ countries.ts
â”‚   â”‚       â”œâ”€â”€ languages.ts
â”‚   â”‚       â””â”€â”€ subjects.ts
â”‚   â”œâ”€â”€ store/
â”‚   â”‚   â”œâ”€â”€ user-store.ts (Zustand)
â”‚   â”‚   â”œâ”€â”€ curriculum-store.ts
â”‚   â”‚   â”œâ”€â”€ progress-store.ts
â”‚   â”‚   â””â”€â”€ ui-store.ts
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ Onboarding.tsx
â”‚   â”‚   â”œâ”€â”€ Learning.tsx
â”‚   â”‚   â”œâ”€â”€ Chat.tsx
â”‚   â”‚   â”œâ”€â”€ Dashboard.tsx
â”‚   â”‚   â””â”€â”€ NotFound.tsx
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”œâ”€â”€ user.ts
â”‚   â”‚   â”œâ”€â”€ curriculum.ts
â”‚   â”‚   â”œâ”€â”€ lesson.ts
â”‚   â”‚   â”œâ”€â”€ quiz.ts
â”‚   â”‚   â””â”€â”€ api.ts
â”‚   â”œâ”€â”€ App.tsx
â”‚   â”œâ”€â”€ main.tsx
â”‚   â””â”€â”€ index.css
â”œâ”€â”€ api/ (Vercel serverless functions)
â”‚   â”œâ”€â”€ curriculum.ts
â”‚   â”œâ”€â”€ lesson.ts
â”‚   â”œâ”€â”€ chat.ts
â”‚   â””â”€â”€ quiz-feedback.ts
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ unit/
â”‚   â”‚   â”œâ”€â”€ education-systems.test.ts
â”‚   â”‚   â”œâ”€â”€ mastery-calculator.test.ts
â”‚   â”‚   â””â”€â”€ storage.test.ts
â”‚   â””â”€â”€ integration/
â”‚       â””â”€â”€ api.test.ts
â”œâ”€â”€ .env.local (API keys - NOT committed)
â”œâ”€â”€ .env.example (template)
â”œâ”€â”€ .gitignore
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ vite.config.ts
â”œâ”€â”€ tailwind.config.js
â”œâ”€â”€ README.md
â””â”€â”€ CLAUDE.md (this file)
```

---

## Data Models (TypeScript Types)

### User Profile
```typescript
interface UserProfile {
  id: string; // UUID generated on first visit
  name: string;
  age: number;
  country: string; // ISO code
  educationSystem: string; // e.g., "Nigerian WAEC", "Syrian MoE"
  gradeLevel: string; // e.g., "Grade 6", "JSS2"
  targetGradeLevel: string; // aspiration
  language: string; // ISO 639-1 code
  cognitiveLevel: 'beginner' | 'intermediate' | 'advanced';
  assessmentResults: AssessmentResult[];
  createdAt: Date;
  lastActive: Date;
}

interface AssessmentResult {
  questionId: string;
  topic: string;
  correct: boolean;
  timeSpent: number; // seconds
}
```

### Curriculum
```typescript
interface Curriculum {
  userId: string;
  country: string;
  gradeLevel: string;
  language: string;
  subjects: Subject[];
  generatedAt: Date;
}

interface Subject {
  id: string;
  name: string; // "Math", "Science", etc.
  topics: Topic[];
}

interface Topic {
  id: string;
  title: string;
  description: string;
  prerequisites: string[]; // topic IDs
  difficulty: 'easy' | 'medium' | 'hard';
  estimatedTime: number; // minutes
  culturalContext: string; // e.g., "Nigerian market economics"
  locked: boolean;
  mastery: number; // 0-100
}
```

### Lesson
```typescript
interface Lesson {
  topicId: string;
  language: string;
  content: {
    introduction: string;
    explanation: string;
    examples: Example[];
    practiceProblems: Problem[];
    summary: string;
  };
  generatedAt: Date;
  cached: boolean;
}

interface Example {
  scenario: string; // culturally relevant context
  problem: string;
  solution: string;
  steps: string[];
}

interface Problem {
  id: string;
  question: string;
  type: 'multiple-choice' | 'short-answer' | 'true-false';
  options?: string[]; // for multiple choice
  hint: string;
  difficulty: 'easy' | 'medium' | 'hard';
}
```

### Quiz
```typescript
interface Quiz {
  topicId: string;
  questions: QuizQuestion[];
  totalQuestions: number;
  passingScore: number; // percentage
}

interface QuizQuestion {
  id: string;
  question: string;
  type: 'multiple-choice' | 'short-answer';
  options?: string[];
  correctAnswer: string | number;
  explanation: string; // Llama-generated
  points: number;
}

interface QuizAttempt {
  quizId: string;
  userId: string;
  answers: UserAnswer[];
  score: number;
  masteryLevel: number;
  completedAt: Date;
  timeSpent: number;
}

interface UserAnswer {
  questionId: string;
  userAnswer: string;
  correct: boolean;
  llamaFeedback: string; // personalized explanation
}
```

### Progress
```typescript
interface Progress {
  userId: string;
  completedTopics: string[]; // topic IDs
  currentTopic: string | null;
  quizAttempts: QuizAttempt[];
  totalTimeSpent: number; // minutes
  streak: number; // consecutive days
  lastStudyDate: Date;
  weakAreas: WeakArea[];
}

interface WeakArea {
  topicId: string;
  topicTitle: string;
  masteryLevel: number;
  attemptsCount: number;
  recommendedAction: 'review' | 'practice' | 'ask-tutor';
}
```

### Chat
```typescript
interface ChatMessage {
  id: string;
  role: 'user' | 'assistant';
  content: string;
  timestamp: Date;
  topicContext?: string; // current topic being discussed
  language: string;
}

interface ChatHistory {
  userId: string;
  messages: ChatMessage[]; // last 10 stored
  currentContext: {
    topic: string | null;
    weakAreas: string[];
    recentQuizzes: QuizAttempt[];
  };
}
```

---

## Llama Prompt Templates

### 1. Curriculum Generation Prompt
```typescript
export const generateCurriculumPrompt = (params: {
  country: string;
  educationSystem: string;
  gradeLevel: string;
  language: string;
  cognitiveLevel: string;
}) => `
You are an expert curriculum designer for out-of-school children in crisis zones.

**Student Context:**
- Country: ${params.country}
- Education System: ${params.educationSystem}
- Target Grade Level: ${params.gradeLevel}
- Language: ${params.language}
- Cognitive Level: ${params.cognitiveLevel}

**Task:**
Generate a personalized learning curriculum with 4 subjects: Math, Science, Language Arts, Social Studies.

**Requirements:**
1. Each subject should have 8-12 topics
2. Sequence topics by prerequisite logic (foundational â†’ advanced)
3. Use culturally relevant topic framing (e.g., "Fractions using [local currency]")
4. Adapt difficulty to cognitive level (not just grade)
5. Include real-world applications relevant to student's context

**Output Format (JSON):**
{
  "subjects": [
    {
      "name": "Math",
      "topics": [
        {
          "id": "math-001",
          "title": "Introduction to Fractions",
          "description": "Learn to divide and represent parts of a whole using [local examples]",
          "prerequisites": [],
          "difficulty": "easy",
          "estimatedTime": 45,
          "culturalContext": "Dividing Naira/bread/resources fairly in the camp"
        }
      ]
    }
  ]
}

Generate curriculum now.
`;
```

### 2. Lesson Generation Prompt
```typescript
export const generateLessonPrompt = (params: {
  topic: Topic;
  language: string;
  country: string;
  cognitiveLevel: string;
  studentAge: number;
}) => `
You are Graspy, an AI tutor for a ${params.studentAge}-year-old student learning ${params.topic.title}.

**Student Context:**
- Country: ${params.country}
- Cognitive Level: ${params.cognitiveLevel}
- Language: ${params.language}
- Current Topic: ${params.topic.title}
- Cultural Context: ${params.topic.culturalContext}

**Task:**
Create a complete lesson that:
1. Explains the concept clearly (age-appropriate, in ${params.language})
2. Uses 3 worked examples from student's cultural context
3. Provides 5 practice problems (2 easy, 2 medium, 1 hard)
4. Includes hints for each problem
5. Maintains dignity (no "baby" examples for older students with gaps)

**Example Format:**
- Use local currency for money problems
- Reference familiar food/objects
- Include scenarios from camp/village life if appropriate

**Output Format (JSON):**
{
  "introduction": "Let's learn about...",
  "explanation": "...",
  "examples": [
    {
      "scenario": "You have 500 Naira to share among 4 friends...",
      "problem": "How much does each person get?",
      "solution": "125 Naira each",
      "steps": ["Divide 500 by 4", "500 Ã· 4 = 125"]
    }
  ],
  "practiceProblems": [
    {
      "question": "...",
      "type": "multiple-choice",
      "options": ["..."],
      "hint": "Think about how you would divide..."
    }
  ],
  "summary": "Today you learned..."
}

Generate lesson in ${params.language} now.
`;
```

### 3. Chat Tutor Prompt
```typescript
export const generateChatPrompt = (params: {
  userMessage: string;
  chatHistory: ChatMessage[];
  userProfile: UserProfile;
  currentTopic: Topic | null;
  weakAreas: WeakArea[];
}) => `
You are Graspy, a patient AI tutor for ${params.userProfile.name}, a ${params.userProfile.age}-year-old student.

**Student Profile:**
- Cognitive Level: ${params.userProfile.cognitiveLevel}
- Language: ${params.userProfile.language}
- Current Topic: ${params.currentTopic?.title || 'None'}
- Weak Areas: ${params.weakAreas.map(w => w.topicTitle).join(', ')}

**Conversation History:**
${params.chatHistory.map(m => `${m.role}: ${m.content}`).join('\n')}

**Student Question:**
${params.userMessage}

**Your Role:**
1. Respond in ${params.userProfile.language}
2. Use Socratic method (guide, don't spoon-feed)
3. Be encouraging and patient
4. Reference their current topic if relevant
5. Use culturally familiar examples
6. If they're struggling, break down into smaller steps
7. Maintain dignity (no condescending language)

**Response Guidelines:**
- Keep responses under 100 words
- Ask clarifying questions if needed
- Provide hints, not direct answers
- Celebrate understanding

Respond now as Graspy.
`;
```

### 4. Quiz Grading Prompt
```typescript
export const generateQuizFeedbackPrompt = (params: {
  question: QuizQuestion;
  userAnswer: string;
  correctAnswer: string;
  language: string;
  studentName: string;
}) => `
You are Graspy, grading ${params.studentName}'s quiz answer.

**Question:** ${params.question.question}
**Student's Answer:** ${params.userAnswer}
**Correct Answer:** ${params.correctAnswer}

**Task:**
Provide personalized feedback in ${params.language}.

**If Correct:**
1. Celebrate their success (specific praise)
2. Explain why their reasoning was good
3. Optionally: Connect to next concept

**If Incorrect:**
1. Validate their attempt ("I see why you might think that...")
2. Identify the misconception
3. Provide a hint to guide toward correct answer
4. Encourage to try again

**Output Format (JSON):**
{
  "correct": true/false,
  "feedback": "Great work! You correctly...",
  "explanation": "This works because...",
  "encouragement": "You're really getting the hang of this!"
}

Generate feedback in ${params.language} now.
`;
```

---

## localStorage Schema

### Key Structure
```typescript
// User identification
localStorage.setItem('graspy_user_id', 'uuid-v4-string');

// User profile
localStorage.setItem(
  'graspy_user_profile',
  JSON.stringify({
    id: 'uuid',
    name: 'Ahmed',
    age: 12,
    country: 'SY',
    gradeLevel: 'Grade 6',
    language: 'ar',
    // ... rest of UserProfile
  })
);

// Curriculum cache
localStorage.setItem(
  'graspy_curriculum_${userId}',
  JSON.stringify({
    subjects: [...],
    generatedAt: '2025-01-15T10:00:00Z'
  })
);

// Lessons cache
localStorage.setItem(
  'graspy_lessons_${userId}',
  JSON.stringify({
    'math-001': { content: {...}, cached: true },
    'math-002': { content: {...}, cached: true }
  })
);

// Progress tracking
localStorage.setItem(
  'graspy_progress_${userId}',
  JSON.stringify({
    completedTopics: ['math-001', 'math-002'],
    quizAttempts: [...],
    weakAreas: [...]
  })
);

// Chat history
localStorage.setItem(
  'graspy_chat_${userId}',
  JSON.stringify({
    messages: [...last 10],
    currentContext: {...}
  })
);
```

### Utility Functions
```typescript
// lib/storage/localStorage.ts

export const getUserId = (): string => {
  let userId = localStorage.getItem('graspy_user_id');
  if (!userId) {
    userId = crypto.randomUUID();
    localStorage.setItem('graspy_user_id', userId);
  }
  return userId;
};

export const saveUserProfile = (profile: UserProfile): void => {
  localStorage.setItem('graspy_user_profile', JSON.stringify(profile));
};

export const getUserProfile = (): UserProfile | null => {
  const data = localStorage.getItem('graspy_user_profile');
  return data ? JSON.parse(data) : null;
};

export const saveCurriculum = (curriculum: Curriculum): void => {
  const userId = getUserId();
  localStorage.setItem(`graspy_curriculum_${userId}`, JSON.stringify(curriculum));
};

export const getCurriculum = (): Curriculum | null => {
  const userId = getUserId();
  const data = localStorage.getItem(`graspy_curriculum_${userId}`);
  return data ? JSON.parse(data) : null;
};

export const saveLesson = (topicId: string, lesson: Lesson): void => {
  const userId = getUserId();
  const key = `graspy_lessons_${userId}`;
  const lessons = JSON.parse(localStorage.getItem(key) || '{}');
  lessons[topicId] = { ...lesson, cached: true };
  localStorage.setItem(key, JSON.stringify(lessons));
};

export const getLesson = (topicId: string): Lesson | null => {
  const userId = getUserId();
  const lessons = JSON.parse(localStorage.getItem(`graspy_lessons_${userId}`) || '{}');
  return lessons[topicId] || null;
};

export const saveProgress = (progress: Progress): void => {
  const userId = getUserId();
  localStorage.setItem(`graspy_progress_${userId}`, JSON.stringify(progress));
};

export const getProgress = (): Progress | null => {
  const userId = getUserId();
  const data = localStorage.getItem(`graspy_progress_${userId}`);
  return data ? JSON.parse(data) : null;
};

export const clearAllData = (): void => {
  const userId = getUserId();
  const keys = [
    'graspy_user_profile',
    `graspy_curriculum_${userId}`,
    `graspy_lessons_${userId}`,
    `graspy_progress_${userId}`,
    `graspy_chat_${userId}`
  ];
  keys.forEach(key => localStorage.removeItem(key));
};
```

---

## API Routes (Vercel Serverless Functions)

### /api/curriculum.ts
```typescript
import type { VercelRequest, VercelResponse } from '@vercel/node';

export default async function handler(req: VercelRequest, res: VercelResponse) {
  if (req.method !== 'POST') {
    return res.status(405).json({ error: 'Method not allowed' });
  }

  try {
    const { country, gradeLevel, language, cognitiveLevel, educationSystem } = req.body;

    // Validate inputs
    if (!country || !gradeLevel || !language) {
      return res.status(400).json({ error: 'Missing required fields' });
    }

    // Call Llama API
    const response = await fetch('https://api-inference.huggingface.co/models/meta-llama/Meta-Llama-3-8B-Instruct', {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${process.env.HUGGINGFACE_API_KEY}`,
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        inputs: generateCurriculumPrompt({ country, gradeLevel, language, cognitiveLevel, educationSystem }),
        parameters: {
          max_new_tokens: 2048,
          temperature: 0.7,
          return_full_text: false
        }
      })
    });

    if (!response.ok) {
      throw new Error(`Llama API error: ${response.statusText}`);
    }

    const data = await response.json();
    
    // Parse Llama response (extract JSON)
    const curriculum = JSON.parse(data[0].generated_text);

    // Return curriculum
    return res.status(200).json({
      success: true,
      curriculum,
      generatedAt: new Date().toISOString()
    });

  } catch (error) {
    console.error('Curriculum generation error:', error);
    return res.status(500).json({ 
      error: 'Failed to generate curriculum',
      message: error.message 
    });
  }
}
```

### /api/lesson.ts
```typescript
import type { VercelRequest, VercelResponse } from '@vercel/node';

export default async function handler(req: VercelRequest, res: VercelResponse) {
  if (req.method !== 'POST') {
    return res.status(405).json({ error: 'Method not allowed' });
  }

  try {
    const { topic, language, country, cognitiveLevel, studentAge } = req.body;

    const response = await fetch('https://api-inference.huggingface.co/models/meta-llama/Meta-Llama-3-8B-Instruct', {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${process.env.HUGGINGFACE_API_KEY}`,
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        inputs: generateLessonPrompt({ topic, language, country, cognitiveLevel, studentAge }),
        parameters: {
          max_new_tokens: 1536,
          temperature: 0.7
        }
      })
    });

    const data = await response.json();
    const lesson = JSON.parse(data[0].generated_text);

    return res.status(200).json({
      success: true,
      lesson,
      generatedAt: new Date().toISOString()
    });

  } catch (error) {
    console.error('Lesson generation error:', error);
    return res.status(500).json({ 
      error: 'Failed to generate lesson',
      message: error.message 
    });
  }
}
```

### /api/chat.ts
```typescript
import type { VercelRequest, VercelResponse } from '@vercel/node';

export default async function handler(req: VercelRequest, res: VercelResponse) {
  if (req.method !== 'POST') {
    return res.status(405).json({ error: 'Method not allowed' });
  }

  try {
    const { userMessage, chatHistory, userProfile, currentTopic, weakAreas } = req.body;

    const response = await fetch('https://api-inference.huggingface.co/models/meta-llama/Meta-Llama-3-8B-Instruct', {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${process.env.HUGGINGFACE_API_KEY}`,
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        inputs: generateChatPrompt({ userMessage, chatHistory, userProfile, currentTopic, weakAreas }),
        parameters: {
          max_new_tokens: 512,
          temperature: 0.8,
          stream: true // Enable streaming for better UX
        }
      })
    });

    const data = await response.json();
    const assistantMessage = data[0].generated_text;

    return res.status(200).json({
      success: true,
      message: assistantMessage,
      timestamp: new Date().toISOString()
    });

  } catch (error) {
    console.error('Chat error:', error);
    return res.status(500).json({ 
      error: 'Failed to get response',
      message: error.message 
    });
  }
}
```

### /api/quiz-feedback.ts
```typescript
import type { VercelRequest, VercelResponse } from '@vercel/node';

export default async function handler(req: VercelRequest, res: VercelResponse) {
  if (req.method !== 'POST') {
    return res.status(405).json({ error: 'Method not allowed' });
  }

  try {
    const { question, userAnswer, correctAnswer, language, studentName } = req.body;

    const response = await fetch('https://api-inference.huggingface.co/models/meta-llama/Meta-Llama-3-8B-Instruct', {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${process.env.HUGGINGFACE_API_KEY}`,
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        inputs: generateQuizFeedbackPrompt({ question, userAnswer, correctAnswer, language, studentName }),
        parameters: {
          max_new_tokens: 256,
          temperature: 0.7
        }
      })
    });

    const data = await response.json();
    const feedback = JSON.parse(data[0].generated_text);

    return res.status(200).json({
      success: true,
      feedback
    });

  } catch (error) {
    console.error('Quiz feedback error:', error);
    return res.status(500).json({ 
      error: 'Failed to generate feedback',
      message: error.message 
    });
  }
}
```

---

## Development Workflow

This is a [Next.js](https://nextjs.org) project bootstrapped with [`create-next-app`](https://nextjs.org/docs/app/api-reference/cli/create-next-app).

## Getting Started

First, run the development server:

```bash
npm run dev
```

Open [http://localhost:3000](http://localhost:3000) with your browser to see the result.

You can start editing the page by modifying `app/page.tsx`. The page auto-updates as you edit the file.

This project uses [`next/font`](https://nextjs.org/docs/app/building-your-application/optimizing/fonts) to automatically optimize and load [Geist](https://vercel.com/font), a new font family for Vercel.

## Learn More

To learn more about Next.js, take a look at the following resources:

- [Next.js Documentation](https://nextjs.org/docs) - learn about Next.js features and API.
- [Learn Next.js](https://nextjs.org/learn) - an interactive Next.js tutorial.